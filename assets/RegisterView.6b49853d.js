import{_ as w,d as N,S as T,r as h,G as y,o as G,aa as j,e as k,h as D,j as t,g as m,q as o,u as r,a$ as A,b0 as b,ap as z,aq as L,V as _}from"./index.e708de0b.js";import{E as M}from"./card.aa742219.js";import{E as H,a as J}from"./form-item.be9355c5.js";import{E as K,a as O}from"./radio.ef425011.js";import{a as v,E as P}from"./index.f5418b94.js";import{E as Q,g as W}from"./button.66c83c36.js";import{l as E}from"./lodash.dbfa3c9d.js";import"./isEqual.2c68993b.js";import"./_commonjsHelpers.4e997714.js";const X=i=>(z("data-v-9043f6b6"),i=i(),L(),i),Y={class:"card-header"},Z=X(()=>m("span",null,"\u6CE8\u518C",-1)),ee=_("\u8FD4\u56DE "),oe=_("\u666E\u901A\u7528\u6237"),ue=_("\u7BA1\u7406\u5458"),te={class:"inline-form-item"},ae=["src"],le={class:"inline-form-item"},re=_("\u53D1\u9001\u9A8C\u8BC1\u7801 "),se=_("\u6CE8\u518C"),ne=N({__name:"RegisterForm",setup(i){const c=T(),f=h(),u=y({name:"",password:"",email:"",img_code:"",validator:"",is_staff:"0"}),x=y({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}],email:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1",trigger:"blur"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u90AE\u7BB1\u683C\u5F0F",trigger:["blur","change"]}],role:[{required:!0,message:"\u8BF7\u9009\u62E9\u804C\u8D23",trigger:"blur"}],img_code:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"}],validator:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"}]}),g=h(""),B=l=>{for(var e="",p=new Uint8Array(l),C=p.byteLength,s=0;s<C;s++)e+=String.fromCharCode(p[s]);return window.btoa(e)},F=E.exports.throttle(function(){v.get("/api/user/former/generate/",{responseType:"arraybuffer"}).then(function(l){g.value="data:image/png;base64,"+B(l.data)}).catch(function(l){console.log(l)})},2e3);G(()=>{F()});const R=E.exports.throttle(function(){u.email!==""&&v.post("/api/user/former/send/",{to_email:u.email}).then(function(l){console.log(l)}).catch(function(l){console.log(l)})},5e3),I=E.exports.throttle(async l=>{!l||(console.log(u),v.post("/api/user/former/register/",u).then(function(e){console.log(e),e.data.code==1?(alert("\u6CE8\u518C\u6210\u529F\uFF0C\u8BF7\u767B\u5F55"),c.push("/")):alert(e.data.msg)}).catch(function(e){console.log(e),alert("\u670D\u52A1\u5668\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u5C1D\u8BD5")}))},2e3),q=()=>{c.go(-1)};return(l,e)=>{const p=j("Back"),C=Q,s=W,d=P,n=H,V=K,U=O,$=J,S=M;return k(),D(S,{shadow:"always"},{header:t(()=>[m("div",Y,[Z,o(s,{onClick:q,size:"small"},{default:t(()=>[o(C,null,{default:t(()=>[o(p)]),_:1}),ee]),_:1})])]),default:t(()=>[o($,{ref_key:"formRef",ref:f,model:u,rules:x,"label-position":"left","label-width":"130px"},{default:t(()=>[o(n,{label:"\u7528\u6237\u540D",prop:"name"},{default:t(()=>[o(d,{modelValue:u.name,"onUpdate:modelValue":e[0]||(e[0]=a=>u.name=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D","prefix-icon":r(A)},null,8,["modelValue","prefix-icon"])]),_:1}),o(n,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[o(d,{modelValue:u.password,"onUpdate:modelValue":e[1]||(e[1]=a=>u.password=a),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801","prefix-icon":r(b)},null,8,["modelValue","prefix-icon"])]),_:1}),o(n,{label:"\u804C\u8D23",prop:"is_staff"},{default:t(()=>[o(U,{modelValue:u.is_staff,"onUpdate:modelValue":e[2]||(e[2]=a=>u.is_staff=a)},{default:t(()=>[o(V,{label:"0"},{default:t(()=>[oe]),_:1}),o(V,{label:"1"},{default:t(()=>[ue]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"\u56FE\u7247\u9A8C\u8BC1\u7801",prop:"img_code"},{default:t(()=>[m("div",te,[o(d,{modelValue:u.img_code,"onUpdate:modelValue":e[3]||(e[3]=a=>u.img_code=a),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801","prefix-icon":r(b)},null,8,["modelValue","prefix-icon"]),m("img",{src:g.value,onClick:e[4]||(e[4]=(...a)=>r(F)&&r(F)(...a)),class:"inline-form-item-suffix"},null,8,ae)])]),_:1}),o(n,{label:"\u90AE\u7BB1",prop:"email"},{default:t(()=>[o(d,{modelValue:u.email,"onUpdate:modelValue":e[5]||(e[5]=a=>u.email=a),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1","prefix-icon":r(A)},null,8,["modelValue","prefix-icon"])]),_:1}),o(n,{label:"\u90AE\u7BB1\u9A8C\u8BC1\u7801",prop:"validator"},{default:t(()=>[m("div",le,[o(d,{modelValue:u.validator,"onUpdate:modelValue":e[6]||(e[6]=a=>u.validator=a),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801","prefix-icon":r(b)},null,8,["modelValue","prefix-icon"]),o(s,{onClick:r(R),class:"inline-form-item-suffix inline-button"},{default:t(()=>[re]),_:1},8,["onClick"])])]),_:1}),o(n,null,{default:t(()=>[o(s,{type:"primary",onClick:e[7]||(e[7]=a=>r(I)(f.value))},{default:t(()=>[se]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}});var ie=w(ne,[["__scopeId","data-v-9043f6b6"]]);const de={};function me(i,c,f,u,x,g){const B=ie;return k(),D(B,{class:"form"})}var ve=w(de,[["render",me],["__scopeId","data-v-82132c24"]]);export{ve as default};
