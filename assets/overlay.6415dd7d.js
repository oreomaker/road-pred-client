import{b2 as $,b3 as te,aC as se,Z as le,w as M,aA as ne,N as O,b as I,L as R,d as j,q as y,z as m,am as ae,r as v,X as re,c as A,n as ie,o as de,I as ue,P as fe,aa as T,e as c,h as ce,j as k,k as pe,v as ye,g as H,l as u,f as S,C as me,x as p,A as ve,m as be,T as Ee,ab as Ce,J as Se}from"./index.e708de0b.js";import{t as we,h as q,y as Y,F as V,w as Te,x as ke,u as P,v as Ae,j as he,s as G,G as Ie,n as K,z as U,E as Be,e as De,_ as Ne}from"./button.66c83c36.js";import{U as X}from"./index.f5418b94.js";import{u as Le,g as Oe,h as Me}from"./BaseHeader.2cd0b39e.js";import{g as Re}from"./validator.543c6d95.js";var h=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(h||{});const lo=e=>{if(!$(e))return{};const o=e.props||{},s=($(e.type)?e.type.props:void 0)||{},t={};return Object.keys(s).forEach(l=>{te(s[l],"default")&&(t[l]=s[l].default)}),Object.keys(o).forEach(l=>{t[se(l)]=o[l]}),t},ze=e=>{if(le(e)||we("[useLockscreen]","You need to pass a ref param to this function"),!q||Y(document.body,"el-popup-parent--hidden"))return;let o=0,s=!1,t="0",l=0;const r=()=>{ke(document.body,"el-popup-parent--hidden"),s&&(document.body.style.paddingRight=t)};M(e,n=>{if(!n){r();return}s=!Y(document.body,"el-popup-parent--hidden"),s&&(t=document.body.style.paddingRight,l=Number.parseInt(V(document.body,"paddingRight"),10)),o=Re();const i=document.documentElement.clientHeight<document.body.scrollHeight,a=V(document.body,"overflowY");o>0&&(i||a==="scroll")&&s&&(document.body.style.paddingRight=`${l+o}px`),Te(document.body,"el-popup-parent--hidden")}),ne(()=>r())},ge=e=>{if(!e)return{onClick:O,onMousedown:O,onMouseup:O};let o=!1,s=!1;return{onClick:n=>{o&&s&&e(n),o=s=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{s=n.target===n.currentTarget}}},$e=I({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:R([String,Array,Object])},zIndex:{type:R([String,Number])}}),He={click:e=>e instanceof MouseEvent};var Ye=j({name:"ElOverlay",props:$e,emits:He,setup(e,{slots:o,emit:s}){const t=P("overlay"),l=a=>{s("click",a)},{onClick:r,onMousedown:n,onMouseup:i}=ge(e.customMaskEvent?void 0:l);return()=>e.mask?y("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:n,onMouseup:i},[m(o,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):ae("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[m(o,"default")])}});const Ve=Ye,Ge=I({center:{type:Boolean,default:!1},closeIcon:{type:Ae,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ue=I({...Ge,appendToBody:{type:Boolean,default:!1},beforeClose:{type:R(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),je={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[X]:e=>he(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},qe=(e,o)=>{const t=ue().emit,{nextZIndex:l}=Le();let r="";const n=G(),i=G(),a=v(!1),b=v(!1),f=v(!1),B=v(e.zIndex||l());let E,C;const Z=re("namespace",Ie),W=A(()=>{const d={},w=`--${Z.value}-dialog`;return e.fullscreen||(e.top&&(d[`${w}-margin-top`]=e.top),e.width&&(d[`${w}-width`]=K(e.width))),d});function J(){t("opened")}function Q(){t("closed"),t(X,!1),e.destroyOnClose&&(f.value=!1)}function _(){t("close")}function z(){C==null||C(),E==null||E(),e.openDelay&&e.openDelay>0?{stop:E}=U(()=>g(),e.openDelay):g()}function D(){E==null||E(),C==null||C(),e.closeDelay&&e.closeDelay>0?{stop:C}=U(()=>L(),e.closeDelay):L()}function N(){function d(w){w||(b.value=!0,a.value=!1)}e.beforeClose?e.beforeClose(d):D()}function F(){e.closeOnClickModal&&N()}function g(){!q||(a.value=!0)}function L(){a.value=!1}function x(){t("openAutoFocus")}function ee(){t("closeAutoFocus")}e.lockScroll&&ze(a);function oe(){e.closeOnPressEscape&&N()}return M(()=>e.modelValue,d=>{d?(b.value=!1,z(),f.value=!0,t("open"),B.value=e.zIndex?B.value++:l(),ie(()=>{o.value&&(o.value.scrollTop=0)})):a.value&&D()}),M(()=>e.fullscreen,d=>{!o.value||(d?(r=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=r)}),de(()=>{e.modelValue&&(a.value=!0,f.value=!0,z())}),{afterEnter:J,afterLeave:Q,beforeLeave:_,handleClose:N,onModalClick:F,close:D,doClose:L,onOpenAutoFocus:x,onCloseAutoFocus:ee,onCloseRequested:oe,titleId:n,bodyId:i,closed:b,style:W,rendered:f,visible:a,zIndex:B}},Pe=I({...Ue,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),Ke=je,Xe=j({name:"ElDrawer",components:{ElOverlay:Ve,ElFocusTrap:Oe,ElIcon:Be,Close:fe},props:Pe,emits:Ke,setup(e,{slots:o}){De({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},A(()=>!!o.title));const s=v(),t=v(),l=P("drawer"),{t:r}=Me(),n=A(()=>e.direction==="rtl"||e.direction==="ltr"),i=A(()=>K(e.size));return{...qe(e,s),drawerRef:s,focusStartRef:t,isHorizontal:n,drawerSize:i,ns:l,t:r}}}),Ze=["aria-label","aria-labelledby","aria-describedby"],We=["id"],Je=["aria-label"],Qe=["id"];function _e(e,o,s,t,l,r){const n=T("close"),i=T("el-icon"),a=T("el-focus-trap"),b=T("el-overlay");return c(),ce(Ce,{to:"body",disabled:!e.appendToBody},[y(Ee,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:k(()=>[pe(y(b,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:k(()=>[y(a,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:k(()=>[H("div",{ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId,class:u([e.ns.b(),e.direction,e.visible&&"open",e.customClass]),style:ve(e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize),role:"dialog",onClick:o[1]||(o[1]=be(()=>{},["stop"]))},[H("span",{ref:"focusStartRef",class:u(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(c(),S("header",{key:0,class:u(e.ns.e("header"))},[e.$slots.title?m(e.$slots,"title",{key:1},()=>[p(" DEPRECATED SLOT ")]):m(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?p("v-if",!0):(c(),S("span",{key:0,id:e.titleId,role:"heading",class:u(e.ns.e("title"))},me(e.title),11,We))]),e.showClose?(c(),S("button",{key:2,"aria-label":e.t("el.drawer.close"),class:u(e.ns.e("close-btn")),type:"button",onClick:o[0]||(o[0]=(...f)=>e.handleClose&&e.handleClose(...f))},[y(i,{class:u(e.ns.e("close"))},{default:k(()=>[y(n)]),_:1},8,["class"])],10,Je)):p("v-if",!0)],2)):p("v-if",!0),e.rendered?(c(),S("div",{key:1,id:e.bodyId,class:u(e.ns.e("body"))},[m(e.$slots,"default")],10,Qe)):p("v-if",!0),e.$slots.footer?(c(),S("div",{key:2,class:u(e.ns.e("footer"))},[m(e.$slots,"footer")],2)):p("v-if",!0)],14,Ze)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[ye,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Fe=Ne(Xe,[["render",_e],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const no=Se(Fe);export{no as E,lo as g};
