import{_ as we}from"./BaseLayout.3dda0c0c.js";import{b as le,d as ie,c as y,e as v,f as R,z as re,q as d,j as u,k as ce,v as ue,u as a,g as c,l as L,C as Z,T as de,J as Ce,L as K,b4 as ke,r as E,o as pe,w as Le,h as T,x as A,a2 as Ee,F as Y,m as Te,A as De,b5 as Q,D as ee,b2 as me,W as ge,b6 as te,b7 as Se,_ as xe,U as Be,aa as oe,B as se,ap as Ne,aq as Ve,V as D}from"./index.e708de0b.js";import{a as ne}from"./index.f5418b94.js";import{E as Ie,a as ze}from"./select.5706773c.js";import"./scrollbar.c53a0cd1.js";import{E as $e,u as Pe}from"./BaseHeader.2cd0b39e.js";import{E as Re}from"./card.aa742219.js";import{u as fe,i as W,_ as _e,m as Oe,v as He,h as ve,H as ae,l as Ae,a as Fe,E as J,I as Ue,z as qe,p as Ye,g as We}from"./button.66c83c36.js";import{E as Je,a as Ze}from"./radio.ef425011.js";import{i as je,E as Xe}from"./initMap.bab84fea.js";import"./BaseSide.6ebff9ca.js";import"./validator.543c6d95.js";import"./isEqual.2c68993b.js";import"./debounce.0109b376.js";import"./_commonjsHelpers.4e997714.js";const Ge=le({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Ke=["textContent"],Qe={name:"ElBadge"},et=ie({...Qe,props:Ge,setup(o,{expose:n}){const e=o,i=fe("badge"),s=y(()=>e.isDot?"":W(e.value)&&W(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return n({content:s}),(p,m)=>(v(),R("div",{class:L(a(i).b())},[re(p.$slots,"default"),d(de,{name:`${a(i).namespace.value}-zoom-in-center`,persisted:""},{default:u(()=>[ce(c("sup",{class:L([a(i).e("content"),a(i).em("content",p.type),a(i).is("fixed",!!p.$slots.default),a(i).is("dot",p.isDot)]),textContent:Z(a(s))},null,10,Ke),[[ue,!p.hidden&&(a(s)||p.isDot)]])]),_:1},8,["name"])],2))}});var tt=_e(et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const ot=Ce(tt),he=["success","info","warning","error"],f=Oe({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:"",id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:ve?document.body:void 0}),st=le({customClass:{type:String,default:f.customClass},center:{type:Boolean,default:f.center},dangerouslyUseHTMLString:{type:Boolean,default:f.dangerouslyUseHTMLString},duration:{type:Number,default:f.duration},icon:{type:He,default:f.icon},id:{type:String,default:f.id},message:{type:K([String,Object,Function]),default:f.message},onClose:{type:K(Function),required:!1},showClose:{type:Boolean,default:f.showClose},type:{type:String,values:he,default:f.type},offset:{type:Number,default:f.offset},zIndex:{type:Number,default:f.zIndex},grouping:{type:Boolean,default:f.grouping},repeatNum:{type:Number,default:f.repeatNum}}),nt={destroy:()=>!0},w=ke([]),at=o=>{const n=w.findIndex(s=>s.id===o),e=w[n];let i;return n>0&&(i=w[n-1]),{current:e,prev:i}},lt=o=>{const{prev:n}=at(o);return n?n.vm.exposeProxy.bottom:0},it=["id"],rt=["innerHTML"],ct={name:"ElMessage"},ut=ie({...ct,props:st,emits:nt,setup(o,{expose:n}){const e=o,{Close:i}=Ue,s=fe("message"),p=E(),m=E(!1),M=E(0);let h;const x=y(()=>e.type?e.type==="error"?"danger":e.type:"info"),b=y(()=>{const t=e.type;return{[s.bm("icon",t)]:t&&ae[t]}}),k=y(()=>e.icon||ae[e.type]||""),F=y(()=>lt(e.id)),O=y(()=>e.offset+F.value),B=y(()=>M.value+O.value),N=y(()=>({top:`${O.value}px`,zIndex:e.zIndex}));function $(){e.duration!==0&&({stop:h}=qe(()=>{V()},e.duration))}function P(){h==null||h()}function V(){m.value=!1}function l({code:t}){t===$e.esc&&V()}return pe(()=>{$(),m.value=!0}),Le(()=>e.repeatNum,()=>{P(),$()}),Ae(document,"keydown",l),Fe(p,()=>{M.value=p.value.getBoundingClientRect().height}),n({visible:m,bottom:B,close:V}),(t,r)=>(v(),T(de,{name:a(s).b("fade"),onBeforeLeave:t.onClose,onAfterLeave:r[0]||(r[0]=_=>t.$emit("destroy")),persisted:""},{default:u(()=>[ce(c("div",{id:t.id,ref_key:"messageRef",ref:p,class:L([a(s).b(),{[a(s).m(t.type)]:t.type&&!t.icon},a(s).is("center",t.center),a(s).is("closable",t.showClose),t.customClass]),style:De(a(N)),role:"alert",onMouseenter:P,onMouseleave:$},[t.repeatNum>1?(v(),T(a(ot),{key:0,value:t.repeatNum,type:a(x),class:L(a(s).e("badge"))},null,8,["value","type","class"])):A("v-if",!0),a(k)?(v(),T(a(J),{key:1,class:L([a(s).e("icon"),a(b)])},{default:u(()=>[(v(),T(Ee(a(k))))]),_:1},8,["class"])):A("v-if",!0),re(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(v(),R(Y,{key:1},[A(" Caution here, message could've been compromised, never use user's input as message "),c("p",{class:L(a(s).e("content")),innerHTML:t.message},null,10,rt)],2112)):(v(),R("p",{key:0,class:L(a(s).e("content"))},Z(t.message),3))]),t.showClose?(v(),T(a(J),{key:2,class:L(a(s).e("closeBtn")),onClick:Te(V,["stop"])},{default:u(()=>[d(a(i))]),_:1},8,["class","onClick"])):A("v-if",!0)],46,it),[[ue,m.value]])]),_:3},8,["name","onBeforeLeave"]))}});var dt=_e(ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let pt=1;const ye=o=>{const n=!o||ee(o)||me(o)||ge(o)?{message:o}:o,e={...f,...n};if(ee(e.appendTo)){let i=document.querySelector(e.appendTo);Ye(i)||(i=document.body),e.appendTo=i}return e},mt=o=>{const n=w.indexOf(o);if(n===-1)return;w.splice(n,1);const{handler:e}=o;e.close()},gt=({appendTo:o,...n},e)=>{const{nextZIndex:i}=Pe(),s=`message_${pt++}`,p=n.onClose,m=document.createElement("div"),M={...n,zIndex:i()+n.zIndex,id:s,onClose:()=>{p==null||p(),mt(k)},onDestroy:()=>{te(null,m)}},h=d(dt,M,ge(M.message)||me(M.message)?{default:M.message}:null);h.appContext=e||z._context,te(h,m),o.appendChild(m.firstElementChild);const x=h.component,k={id:s,vnode:h,vm:x,handler:{close:()=>{x.exposeProxy.visible=!1}},props:h.component.props};return k},z=(o={},n)=>{if(!ve)return{close:()=>{}};if(W(Q.max)&&w.length>=Q.max)return{close:()=>{}};const e=ye(o);if(e.grouping&&w.length){const s=w.find(({vnode:p})=>{var m;return((m=p.props)==null?void 0:m.message)===e.message});if(s)return s.props.repeatNum+=1,s.props.type=e.type,s.handler}const i=gt(e,n);return w.push(i),i.handler};he.forEach(o=>{z[o]=(n={},e)=>{const i=ye(n);return z({...i,type:o},e)}});function ft(o){for(const n of w)(!o||o===n.props.type)&&n.handler.close()}z.closeAll=ft;z._context=null;const q=Se(z,"$message");const S=o=>(Ne("data-v-110c23d8"),o=o(),Ve(),o),_t=S(()=>c("div",{class:"map-container"},[c("div",{id:"localMap"})],-1)),vt={class:"right-container"},ht=D("\xA0 "),yt=S(()=>c("span",null,"\u5355\u70B9\u4E8B\u6545\u7B49\u7EA7\u9884\u6D4B",-1)),Mt={class:"data-item-container"},bt=S(()=>c("span",null,"\u8BF7\u9009\u62E9\u65E5\u671F\uFF1A",-1)),wt={class:"data-item-container"},Ct=S(()=>c("span",null,"\u8BF7\u9009\u62E9\u65F6\u95F4\uFF1A",-1)),kt=D("\u767D\u5929"),Lt=D("\u591C\u665A"),Et={class:"data-item-container"},Tt=D("\u9884\u6D4B\u7B49\u7EA7"),Dt=D("\u6E05\u9664\u6807\u70B9"),St={class:"data-item-container"},xt=D("\xA0 "),Bt=S(()=>c("span",null,"\u9AD8\u5371\u5730\u70B9\u9884\u8B66",-1)),Nt={class:"data-item-container"},Vt=S(()=>c("span",null,"\u9009\u62E9\u9884\u6D4B\u7684\u65E5\u671F\uFF1A",-1)),It={class:"data-item-container"},zt=S(()=>c("span",null,"\u9009\u62E9\u9884\u6D4B\u7684\u65F6\u95F4\uFF1A",-1)),$t={class:"data-item-container"},Pt=D("\u663E\u793A\u9884\u6D4B\u7ED3\u679C"),Rt=D("\u6E05\u7A7A\u5730\u56FE\u754C\u9762"),Ot=S(()=>c("div",{id:"printoutPanel"},null,-1)),Ht={__name:"MapView",setup(o){const n=Be();let e={};pe(()=>{je.init().then(l=>{e=new l.Maps.Map("#localMap",{credentials:"Aoqy2mXrSBghBTiA1u_uB6zmWqcHfdVJn4Jq7M7l87XgYlA7I0ZLSH5AlR19LzdY",center:new l.Maps.Location(40.76737744930541,-73.98389818892902)}),l.Maps.Events.addHandler(e,"click",i)})});const i=l=>{console.log(l);const t=new Microsoft.Maps.Location(l.location.latitude,l.location.longitude),r="\u8D77\u70B9",_="\u7EC8\u70B9";if(e.entities.getLength()===0){var C=new Microsoft.Maps.Pushpin(t,{color:"red",draggable:!0});e.entities.push(C)}else if(e.entities.getLength()===1){const I=e.entities.pop(),U=new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(I.geometry.y,I.geometry.x),{color:"red",draggable:!0,title:r});e.entities.push(U),console.log(I);var C=new Microsoft.Maps.Pushpin(t,{color:"red",draggable:!0,title:_});e.entities.push(C)}},s=E(new Date),p=y(()=>s.value.getFullYear()+"-"+s.value.getMonth()+"-"+s.value.getDate()),m=E("0"),M=E(0),h=()=>{if(console.log(e.entities.getLength()),e.entities.getLength()!==1)q.error("\u4F7F\u7528\u9884\u6D4B\u529F\u80FD\u65F6\uFF0C\u5730\u56FE\u4E0A\u4EC5\u5141\u8BB8\u5B58\u5728\u4E00\u4E2A\u6807\u70B9\uFF01");else{const l=e.entities.get(0);ne.post("/api/result/predict/?token="+n.token,{latitude:l.geometry.y,longitude:l.geometry.x,date:p.value,dawn_dusk:m.value}).then(t=>{console.log(t),M.value=t.data.msg}).catch(t=>{console.log(t)})}},x=()=>{e.entities.clear()};let b={};const k=()=>{console.log("test"),N.value===""?q.error("\u4F7F\u7528\u9884\u6D4B\u529F\u80FD\u65F6\uFF0C\u8BF7\u5148\u9009\u62E9\u9884\u6D4B\u65F6\u95F4\uFF01"):e.entities.getLength()<2?q.error("\u4F7F\u7528\u9884\u6D4B\u529F\u80FD\u65F6\uFF0C\u8BF7\u5148\u5728\u5730\u56FE\u4E0A\u52A0\u5165\u4E24\u4E2A\u6807\u70B9\uFF01"):e.entities.getLength()===2?(Microsoft.Maps.loadModule("Microsoft.Maps.Directions",()=>{b=new Microsoft.Maps.Directions.DirectionsManager(e),b.setRequestOptions({routeMode:Microsoft.Maps.Directions.RouteMode.driving});const l=e.entities.get(1).getLocation(),t=e.entities.get(0).getLocation();b.addWaypoint(new Microsoft.Maps.Directions.Waypoint({location:t})),b.addWaypoint(new Microsoft.Maps.Directions.Waypoint({location:l})),b.setRenderOptions({itineraryContainer:document.getElementById("printoutPanel")}),b.calculateDirections()}),$()):(P(),k())},F=y(()=>{const l=new Date;console.log(l.getHours());const t=24*60*60*1e3,r=[];for(let _=0;_<5;_++){let C=new Date(l.getTime()+t*_);r.push({value:_+"",label:C.getFullYear()+"-"+(C.getMonth()+1)+"-"+C.getDate()})}return r}),O=y(()=>{const l=[];if(B.value==="0"){const t=new Date;for(let r=t.getHours()+1;r<24;r++)l.push({value:r+"",label:r+":00-"+(r+1)+":00"})}else for(let t=0;t<24;t++)l.push({value:t+"",label:t+":00-"+(t+1)+":00"});return l}),B=E("0"),N=E(""),$=()=>{const l=e.entities.get(1).getLocation(),t=e.entities.get(0).getLocation();ne.post("/api/result/navigate/?token="+n.token,{lat1:t.latitude,lng1:t.longitude,lat2:l.latitude,lng2:l.longitude,day:B.value,hour:N.value}).then(r=>{console.log(r),V(r.data.msg)}).catch(r=>{console.log(r)})},P=()=>{b.clearDisplay(),e.entities.clear()},V=l=>{e.entities.clear();for(let r of l){let _=new Microsoft.Maps.Location(r[0],r[1]);console.log(_);var t=new Microsoft.Maps.Pushpin(_,{color:"red"});e.entities.push(t)}};return(l,t)=>{const r=oe("Stopwatch"),_=J,C=Xe,I=Je,U=Ze,H=We,j=Re,Me=oe("MapLocation"),X=Ie,G=ze,be=we;return v(),T(be,null,{default:u(()=>[_t,c("div",vt,[d(j,{class:"level-pred-container"},{header:u(()=>[d(_,null,{default:u(()=>[d(r)]),_:1}),ht,yt]),default:u(()=>[c("div",Mt,[bt,d(C,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=g=>s.value=g),type:"date",placeholder:"\u9009\u62E9\u4E00\u4E2A\u65E5\u671F",format:"YYYY-MM-DD"},null,8,["modelValue"])]),c("div",wt,[Ct,d(U,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=g=>m.value=g),class:"day-night"},{default:u(()=>[d(I,{label:"0"},{default:u(()=>[kt]),_:1}),d(I,{label:"1"},{default:u(()=>[Lt]),_:1})]),_:1},8,["modelValue"])]),c("div",Et,[d(H,{onClick:h,type:"primary"},{default:u(()=>[Tt]),_:1}),d(H,{onClick:x},{default:u(()=>[Dt]),_:1})]),c("div",St,[c("span",null,"\u9884\u6D4B\u7B49\u7EA7: "+Z(M.value),1)])]),_:1}),d(j,{class:"navi-pred-container"},{header:u(()=>[d(_,null,{default:u(()=>[d(Me)]),_:1}),xt,Bt]),default:u(()=>[c("div",Nt,[Vt,d(G,{modelValue:B.value,"onUpdate:modelValue":t[2]||(t[2]=g=>B.value=g),placeholder:"\u9009\u62E9\u4E00\u4E2A\u65E5\u671F"},{default:u(()=>[(v(!0),R(Y,null,se(a(F),g=>(v(),T(X,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),c("div",It,[zt,d(G,{modelValue:N.value,"onUpdate:modelValue":t[3]||(t[3]=g=>N.value=g),placeholder:"\u9009\u62E9\u4E00\u4E2A\u65F6\u95F4"},{default:u(()=>[(v(!0),R(Y,null,se(a(O),g=>(v(),T(X,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),c("div",$t,[d(H,{onClick:k,type:"primary",style:{width:"156px"}},{default:u(()=>[Pt]),_:1}),d(H,{onClick:P,style:{width:"156px"}},{default:u(()=>[Rt]),_:1})]),Ot]),_:1})])]),_:1})}}};var oo=xe(Ht,[["__scopeId","data-v-110c23d8"]]);export{oo as default};
